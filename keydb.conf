############################################
# NETWORK SETTINGS
############################################

# Port KeyDB will listen on
port 6379

# Bind to all interfaces (good for Docker or development)
bind 0.0.0.0

# Do not daemonize (required for Docker)
daemonize no

# Disable protected mode (safe if you're using requirepass and controlled networking)
protected-mode no

############################################
# AUTHENTICATION
############################################

# Password required to access the server
requirepass redis

############################################
# MULTITHREADING (KeyDB exclusive)
############################################

# Number of I/O threads (recommended: number of CPU cores)
server-threads 2

############################################
# MEMORY MANAGEMENT
############################################

# Limit memory usage (KeyDB will start evicting keys if this is exceeded)
maxmemory 500MB

############################################
# PERSISTENCE SETTINGS: RDB (Snapshot)
############################################

# Save snapshot every 15 min with 1 key change, etc.
save 900 1
save 300 10
save 60 10000

# Directory where dumps and AOF files will be stored
dir /data

# Filename for the RDB snapshot
dbfilename keydb.rdb

############################################
# PERSISTENCE SETTINGS: AOF (Append-Only File)
############################################

# Enable append-only file (good for durability)
appendonly yes

# Sync strategy: every second (safe and fast)
appendfsync everysec

# Use hybrid AOF+RDB format for faster startup
aof-use-rdb-preamble yes

# Allow fsync during AOF rewrite
no-appendfsync-on-rewrite no

# Name of the append-only file
appendfilename appendonly.aof

# Rewrite AOF if it has grown 100% and is at least 64MB
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb

############################################
# LOGGING
############################################

# Logging level (notice is a good balance)
loglevel notice

# Log file name; use "" for stdout (recommended for Docker)
logfile ""
